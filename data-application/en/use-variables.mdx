---
title: '変数を使う'
---

Morphでは、Python関数やSQLファイルの中で変数を定義することができますが、MDXファイルから実行する場合にも変数を利用することができます。

Python, SQLファイル中での変数の利用については、[変数の使い方](/data-application/ja/variables)を参照してください。

## MDXファイルでの変数の使い方

MDXファイルで変数を使うには、**新たにtsxファイルを作成**し、変数を利用したReactコンポーネントを作成してから、それをMDXファイル内で利用する必要があります。

<Warning>mdxファイル内で直接 `useVariable` を利用することはできません。</Warning>

<CodeGroup>

```tsx src/components/stocks-with-dates.tsx
import { DataTable, useVariable, VariableDatePicker } from '@use-morph/page';

export const StocksWithDates = () => {
  const dateRangeStart = useVariable<Date | null>(null);
  const dateRangeEnd = useVariable<Date | null>(null);

  return (
    <div>
      <VariableDatePicker 
        type="range" 
        variables={[
          dateRangeStart,
          dateRangeEnd
        ]}
      />
      <div className="h-[600px] w-full">
        <DataTable 
          alias="stocks" 
          variables={{
            start_date: dateRangeStart,
            end_date: dateRangeEnd
          }} 
        />
      </div>
    </div>
  );
}

```

```tsx index.mdx
export const name = 'index';
export const title = 'Top page';

# Stock prices with dates

import { StocksWithDates } from './components/stocks-with-dates';

<StocksWithDates>
```

```python stocks.py
import pandas as pd

import morph
from morph import MorphGlobalContext

import pandas as pd

@morph.func(
    name="stocks",
    description="stock prices with dates",
    output_paths=["_private/{name}/{now()}{ext()}"],
    output_type="dataframe",
)
@morph.variables('start_date')
@morph.variables('end_date')
def main(context: MorphGlobalContext) -> pd.DataFrame:
    df = pd.read_csv('./src/stocks.csv')

    start_date = context.var.get('start_date', None)
    end_date = context.var.get('end_date', None)

    df['date'] = pd.to_datetime(df['date'], format='%b %d %Y')
    
    if start_date is None:
        start_date = df['date'].min()
    else:
        start_date = pd.to_datetime(start_date, format='%Y-%m-%d')
    
    if end_date is None:
        end_date = df['date'].max()
    else:
        end_date = pd.to_datetime(end_date, format='%Y-%m-%d')
    
    filtered_df = df[(df['date'] >= start_date) & (df['date'] <= end_date)]
    return filtered_df
```

</CodeGroup>

## `useVariable` フック

変数の宣言には `useVariable` を使用してください。
  
```tsx
const dateRangeStart = useVariable<Date | null>(null);
const dateRangeEnd = useVariable<Date | null>(null);
```

## コンポーネントに渡す

コンポーネントに渡す際には、オブジェクト形式で、PythonまたはSQLファイル内での変数名をキーとして渡してください。

上記の例では、Pythonファイル中で `start_date` と `end_date` を変数として利用しているため、それらをキーとして渡しています。

```tsx
<DataTable 
  alias="stocks" 
  variables={{
    start_date: dateRangeStart,
    end_date: dateRangeEnd
  }}
/>
```